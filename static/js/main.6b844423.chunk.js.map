{"version":3,"sources":["utils/consts.js","components/Navbar.js","components/Loader.js","components/Chat.js","routes.js","components/Login.js","components/AppRouter.js","App.js","index.js"],"names":["LOGIN_ROUTE","CHAT_ROUTE","Navbar","auth","useContext","Context","useAuthState","user","AppBar","color","position","Toolbar","variant","Grid","container","justify","Button","onClick","signOut","to","Loader","Container","style","height","window","innerHeight","alignItems","justifyContent","direction","class","Chat","firestore","useState","value","setValue","useCollectionData","collection","orderBy","messages","loading","sendMessage","a","add","uid","displayName","photoURL","text","createAt","firebase","FieldValue","serverTimestamp","marginTop","width","border","overflowY","map","message","margin","marginLeft","padding","Avatar","src","TextField","fullWidth","rowsMax","onChange","e","target","publicRoutes","path","Component","login","provider","GoogleAuthProvider","signInWithPopup","console","log","background","Box","p","privetRoutes","Approuter","component","exact","App","AppRouter","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","createContext","onAuthStateChanged","ReactDOM","render","StrictMode","Provider","document","getElementById"],"mappings":"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","file":"static/js/main.6b844423.chunk.js","sourcesContent":["export const LOGIN_ROUTE = \"/login\";\r\nexport const CHAT_ROUTE = \"/chat\";\r\n","import React,{useContext} from \"react\";\r\nimport AppBar from \"@material-ui/core/AppBar\";\r\nimport Toolbar from \"@material-ui/core/Toolbar\";\r\nimport { Button, Grid } from \"@material-ui/core\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport { LOGIN_ROUTE } from \"../utils/consts\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { Context } from \"../index\";\r\nimport '../App.css'\r\n\r\nconst Navbar = () => {\r\n  const { auth } = useContext(Context);\r\n  \r\n  const [user] = useAuthState(auth);\r\n\r\n  return (\r\n    <AppBar color={\"secondary\"} position=\"static\">\r\n      <Toolbar variant={'dense'}> \r\n        <Grid container justify={\"flex-end\"}>\r\n          {user ? (\r\n            <Button onClick={()=> auth.signOut()} variant={\"outlined\"}>Выйти </Button>\r\n          ) : (\r\n            <NavLink to={LOGIN_ROUTE}>\r\n              <Button variant={\"outlined\"}>Логин</Button>\r\n            </NavLink>\r\n          )}\r\n        </Grid>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import { Container, Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport \"./Loader.css\";\r\nconst Loader = () => {\r\n  return (\r\n    <Container>\r\n      <Grid\r\n        container\r\n        style={{ height: window.innerHeight - 50 }}\r\n        alignItems={\"center\"}\r\n        justifyContent={\"center\"}\r\n      >\r\n        <Grid container alignItems={\"center\"} direction={\"column\"}>\r\n          <div class=\"lds-spinner\">\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n            <div></div>\r\n          </div>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Loader;\r\n","import { Avatar, Button, Container, Grid, TextField } from \"@material-ui/core\";\r\nimport React, { useContext, useState } from \"react\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { useCollectionData } from \"react-firebase-hooks/firestore\";\r\nimport firebase from \"@firebase/app-compat\";\r\nimport { Context } from \"../index\";\r\nimport Loader from \"./Loader\";\r\nconst Chat = () => {\r\n  const { auth, firestore } = useContext(Context);\r\n  const [user] = useAuthState(auth);\r\n  const [value, setValue] = useState(\"\");\r\n  const [messages, loading] = useCollectionData(\r\n    firestore.collection(\"messages\").orderBy(\"createAt\")\r\n  );\r\n\r\n  const sendMessage = async () => {\r\n    firestore.collection(\"messages\").add({\r\n      uid: user.uid,\r\n      displayName: user.displayName,\r\n      photoURL: user.photoURL,\r\n      text: value,\r\n      createAt: firebase.firestore.FieldValue.serverTimestamp(),\r\n    });\r\n    setValue(\" \");\r\n  };\r\n  if (loading) {\r\n    return <Loader />;\r\n  }\r\n  return (\r\n    <Container>\r\n      <Grid\r\n        container\r\n        justify={\"center\"}\r\n        style={{ height: window.innerHeight - 50, marginTop: 20 }}\r\n      >\r\n        <div\r\n          style={{\r\n            width: \"80%\",\r\n            height: \"60vh\",\r\n            border: \"1px solid grey\",\r\n            overflowY: \"auto\",\r\n          }}\r\n        >\r\n          {messages.map((message) => {\r\n            return (\r\n              <div\r\n                style={{\r\n                  margin: 10,\r\n                  border:\r\n                    user.uid === message.uid\r\n                      ? \"2px solid green\"\r\n                      : \"2px solid red\",\r\n                  marginLeft: user.uid === message.uid ? \"auto\" : \"10px\",\r\n                  width: \"fit-content\",\r\n                  padding: 5,\r\n                }}\r\n              >\r\n                <Grid container>\r\n                  <Avatar src={message.photoURL} />\r\n                  <div>{message.displayName}</div>\r\n                </Grid>\r\n                <div>{message.text}</div>\r\n              </div>\r\n            );\r\n          })}\r\n        </div>\r\n        <Grid\r\n          container\r\n          direction={\"column\"}\r\n          alignItems={\"flex-end\"}\r\n          style={{ width: \"80%\" }}\r\n        >\r\n          <TextField\r\n            variant=\"outlined\"\r\n            fullWidth\r\n            rowsMax={2}\r\n            value={value}\r\n            onChange={(e) => setValue(e.target.value)}\r\n          />\r\n          <Button variant=\"outlined\" onClick={sendMessage}>\r\n            Отправить\r\n          </Button>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Chat;\r\n","import Chat from \"./components/Chat\";\r\nimport Login from \"./components/Login\";\r\nimport { CHAT_ROUTE, LOGIN_ROUTE } from \"./utils/consts\";\r\n\r\nexport const publicRoutes = [\r\n  {\r\n    path: LOGIN_ROUTE,\r\n    Component: Login,\r\n  },\r\n];\r\n\r\nexport const privetRoutes = [\r\n  {\r\n    path: CHAT_ROUTE,\r\n    Component: Chat,\r\n  },\r\n];\r\n","import { Box, Button, Container, Grid } from \"@material-ui/core\";\r\nimport React, { useContext } from \"react\";\r\nimport { Context } from \"../index\";\r\nimport firebase from \"firebase/compat/app\";\r\nimport \"../App.css\"\r\nconst Login = () => {\r\n  const { auth } = useContext(Context);\r\n\r\n  const login = async () => {\r\n    const provider = new firebase.auth.GoogleAuthProvider();\r\n    const { user } = await auth.signInWithPopup(provider);\r\n    console.log(user);\r\n  };\r\n  return (\r\n    <Container>\r\n      <Grid\r\n        container\r\n        style={{ height: window.innerHeight - 50 }}\r\n        alignItems={\"center\"}\r\n        justifyContent={\"center\"}\r\n      >\r\n        <Grid\r\n          style={{ width: 400, background: \"lightgrey\" }}\r\n          container\r\n          alignItems={\"center\"}\r\n          direction={\"column\"}\r\n        >\r\n          <Box p={5}>\r\n            <Button onClick={login} variant={\"outlined\"}>\r\n              {\" \"}\r\n              Войти с помощью Google\r\n            </Button>\r\n          </Box>\r\n        </Grid>\r\n      </Grid>\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useContext } from \"react\";\r\nimport { Route, Switch, Redirect } from \"react-router-dom\";\r\nimport { privetRoutes, publicRoutes } from \"../routes\";\r\nimport { CHAT_ROUTE, LOGIN_ROUTE } from \"../utils/consts\";\r\nimport { useAuthState } from \"react-firebase-hooks/auth\";\r\nimport { Context } from \"../index\";\r\n\r\nconst Approuter = () => {\r\n  const { auth } = useContext(Context);\r\n  const [user] = useAuthState(auth);\r\n  // console.log(user);\r\n  \r\n  return user ? (\r\n    <Switch>\r\n      {privetRoutes.map(({ path, Component }) => (\r\n        <Route key={path} path={path} component={Component} exact={true} />\r\n      ))}\r\n      <Redirect to={CHAT_ROUTE} />\r\n    </Switch>\r\n  ) : (\r\n    <Switch>\r\n      {publicRoutes.map(({ path, Component }) => (\r\n        <Route key={path} path={path} component={Component} exact={true} />\r\n      ))}\r\n      <Redirect to={LOGIN_ROUTE} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Approuter;\r\n","import React, { useContext } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\n\nimport Navbar from \"./components/Navbar\";\nimport AppRouter from \"./components/AppRouter\";\nimport Loader from \"./components/Loader\";\nimport { Context } from \"./index\";\n\nimport \"./App.css\";\n\nfunction App() {\n  const { auth } = useContext(Context);\n  const [user,loading,error ] = useAuthState(auth);\n  \n  if(loading){\n    return <Loader/>\n  }\n  \n  return (\n    <Router>\n      <Navbar />\n      <AppRouter />\n    </Router>\n  );\n}\n\nexport default App;\n","import React, { createContext } from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport firebase from \"firebase/compat/app\";\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/firestore\";\n// import { initializeApp } from 'firebase/app';\n\nfirebase.initializeApp({\n  apiKey: \"AIzaSyC_2H8dDf8eNJvLIOkoZtmrlxQaKrquNag\",\n  authDomain: \"chat-react-cb1e0.firebaseapp.com\",\n  projectId: \"chat-react-cb1e0\",\n  storageBucket: \"chat-react-cb1e0.appspot.com\",\n  messagingSenderId: \"938879837972\",\n  appId: \"1:938879837972:web:a7162aaf6f9dfdc7bf4401\",\n  measurementId: \"G-F1CPKCGNJZ\",\n});\nexport const Context = createContext(null);\nconst auth = firebase.auth().onAuthStateChanged(function (user) {\n  if (user) {\n    // User is signed in.\n  } else {\n    // No user is signed in.\n  }\n});\nconst firestore = firebase.firestore();\n\nReactDOM.render(\n  <React.StrictMode>\n    <Context.Provider\n      value={{\n        firebase,\n        auth,\n        firestore,\n      }}\n    >\n      <App />\n    </Context.Provider>\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}